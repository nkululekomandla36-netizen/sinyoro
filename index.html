<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Sinyoro - Offline-first marketplace for rural African communities.">
<meta name="theme-color" content="#0f172a">
<title>Sinyoro - Rural Community Marketplace</title>

<style>
* { margin:0; padding:0; box-sizing:border-box; }
body {
    font-family: system-ui, -apple-system, Segoe UI, sans-serif;
    background: linear-gradient(135deg,#0f172a,#1e3a8a,#0f172a);
    color:#fff;
    min-height:100vh;
}
.loading { opacity:0; }
.lang-dropdown { display:none; position:absolute; z-index:999; }
.lang-dropdown.show { display:block; }
.status-dot {
    width:10px;height:10px;border-radius:50%;
    background:#facc15;display:inline-block;margin-right:6px;
}
.status-dot.online { background:#22c55e; }
.status-dot.offline { background:#ef4444; }
</style>

<link rel="stylesheet" href="css/style.css">
</head>

<body class="loading">

<nav class="navbar">
    <div class="nav-brand">
        <div class="logo">üåç Sinyoro</div>
    </div>

    <div class="nav-actions">
        <!-- LANGUAGE -->
        <div class="language-selector">
            <button id="languageBtn" type="button">
                üåç <span id="currentLang">English</span> ‚ñº
            </button>
            <div id="langDropdown" class="lang-dropdown">
                <button data-lang="en">English</button>
                <button data-lang="sw">Kiswahili</button>
                <button data-lang="zu">isiZulu</button>
                <button data-lang="sn">ChiShona</button>
                <button data-lang="af">Afrikaans</button>
            </div>
        </div>
    </div>
</nav>

<section id="home">
    <h1>Trade Without Internet</h1>
    <p>Buy, sell, and barter locally ‚Äî offline-first.</p>

    <div class="offline-indicator">
        <span id="connectionStatus" class="status-dot"></span>
        <span id="statusText">Checking connection...</span>
    </div>
</section>

<!-- JS FILES -->
<script src="js/translations.js"></script>
<script src="js/location-system.js"></script>
<script src="js/app.js"></script>

<!-- üîí SAFETY JS (DO NOT REMOVE) -->
<script>
document.addEventListener("DOMContentLoaded", () => {

    // ‚úÖ LANGUAGE DROPDOWN FIX
    const btn = document.getElementById("languageBtn");
    const dropdown = document.getElementById("langDropdown");
    const currentLang = document.getElementById("currentLang");

    btn.addEventListener("click", () => {
        dropdown.classList.toggle("show");
    });

    dropdown.querySelectorAll("button").forEach(b => {
        b.addEventListener("click", () => {
            currentLang.textContent = b.textContent;
            dropdown.classList.remove("show");
        });
    });

    document.addEventListener("click", e => {
        if (!btn.contains(e.target) && !dropdown.contains(e.target)) {
            dropdown.classList.remove("show");
        }
    });

    // ‚úÖ CONNECTION STATUS FIX
    const statusDot = document.getElementById("connectionStatus");
    const statusText = document.getElementById("statusText");

    function updateStatus() {
        if (navigator.onLine) {
            statusDot.className = "status-dot online";
            statusText.textContent = "Online mode";
        } else {
            statusDot.className = "status-dot offline";
            statusText.textContent = "Offline mode";
        }
    }

    window.addEventListener("online", updateStatus);
    window.addEventListener("offline", updateStatus);
    updateStatus();

    document.body.classList.remove("loading");
});
</script>

</body>
</html>
